# 📖 3D卡片项目概览

快速了解项目的完整信息。

---

## 🎯 项目简介

这是一个基于Three.js的3D卡片翻转效果应用，支持自定义图片贴图和3D模型加载。项目采用完全模块化的架构，易于集成和扩展。

**最新版本**：v2.0（模块化重构版）  
**技术栈**：Three.js + ES6模块  
**代码质量**：✅ 无Linter错误 | 完整注释 | 测试齐全

---

## ⚡ 快速开始

### 1️⃣ 启动项目
```bash
# 在项目目录下运行
py -m http.server 8000

# 然后访问
http://localhost:8000/index.html
```

### 2️⃣ 测试功能
```bash
# 模块加载测试
http://localhost:8000/tests/test-modules.html

# API使用示例
http://localhost:8000/tests/example-usage.html
```

### 3️⃣ 使用API
```javascript
import app from './main.js';

// 创建3D卡片
app.getUploadManager().createCard({
    frontImageData: '正面图片Data URL',
    backImageData: '背面图片Data URL'
});

// 控制旋转
app.getControlsManager().setAutoRotate(true);

// 调整相机
app.getSceneManager().adjustCameraDistance(-2);
```

---

## 📁 核心文件一览

### 主要代码（11个JS文件）
```
main.js         # 主入口，整合所有模块
scene.js        # 场景管理（重构版，整合子系统）
renderer.js     # 渲染器管理 ✨新增
camera.js       # 相机管理 ✨新增
lighting.js     # 光照系统 ✨新增
model.js        # 模型和纹理管理
upload.js       # 文件上传处理
controls.js     # 用户交互控制
utils.js        # 工具函数库
```

### 页面文件
```
index.html      # 主页面（推荐使用）
1.html          # 单文件版本（备用参考）
styles.css      # 样式文件
```

### 测试文件（tests/目录）
```
test-modules.html     # 模块加载测试
example-usage.html    # API使用示例
start-fresh.html      # 缓存清理工具
README.md             # 测试说明
```

---

## 📚 文档导航

### 🔰 新手必读
1. **[README.md](README.md)** - 从这里开始！
   - 快速开始指南
   - 基础使用方法
   - API示例代码

2. **[tests/README.md](tests/README.md)** - 测试指南
   - 如何测试项目
   - 测试页面说明
   - 故障排查

### 🔧 开发者文档
3. **[API.md](API.md)** - 完整API文档
   - 所有接口说明
   - 详细参数列表
   - 使用示例

4. **[模块重构说明.md](模块重构说明.md)** - 重构详解
   - 新增模块介绍
   - 重构前后对比
   - 使用指南

5. **[项目结构说明.md](项目结构说明.md)** - 架构说明
   - 完整目录结构
   - 模块依赖关系
   - 设计思路

### 🛠️ 运维文档
6. **[故障排查指南.md](故障排查指南.md)** - 问题解决
   - 常见错误
   - 解决方案
   - 调试技巧

7. **[清理记录.md](清理记录.md)** - 文件管理
   - 可删除文件
   - 清理建议
   - 目录整理

8. **[重构与清理总结.md](重构与清理总结.md)** - 工作总结
   - 重构成果
   - 优化详情
   - 最佳实践

---

## 🎨 核心功能

### ✅ 3D卡片创建
- 支持自定义正面/背面图片
- 支持自定义3D模型（GLB/GLTF）
- 自动创建默认卡片模型

### ✅ 交互控制
- 自动旋转模式
- 手动拖拽控制
- 鼠标滚轮缩放

### ✅ 高质量渲染
- 抗锯齿渲染
- 柔和阴影效果
- 动态光照系统
- 物理正确光照

### ✅ 模块化架构
- 独立的渲染器管理
- 独立的相机系统
- 独立的光照系统
- 统一的API接口

---

## 🔍 重构亮点

### 📦 模块化设计
```
重构前：scene.js (199行) - 所有功能混在一起
重构后：4个独立模块 (592行) - 职责清晰，易于维护

✨ renderer.js (118行) - 渲染器管理
✨ camera.js (139行) - 相机管理
✨ lighting.js (180行) - 光照系统
✅ scene.js (155行) - 场景整合
```

### 🎯 优势对比
| 方面 | 重构前 | 重构后 |
|------|--------|--------|
| **可维护性** | 😐 代码混杂 | ✅ 模块清晰 |
| **可复用性** | ❌ 难以复用 | ✅ 独立可用 |
| **可扩展性** | ⚠️ 修改困难 | ✅ 易于扩展 |
| **可测试性** | ❌ 测试困难 | ✅ 独立测试 |
| **向后兼容** | - | ✅ 完全兼容 |

---

## 🧪 测试覆盖

### ✅ 模块加载测试
测试所有11个模块是否正确加载：
- Three.js CDN
- GLTFLoader
- 所有自定义模块（包括新增的3个）

### ✅ 功能测试
测试所有核心功能：
- 创建3D卡片
- 旋转控制（自动/手动/指定角度）
- 相机控制（拉近/拉远/重置）
- 动画效果（翻转/旋转/缩放）

### ✅ 工具支持
- 缓存清理工具
- 性能监控接口
- 调试模式支持

---

## 💡 API示例

### 基础使用
```javascript
// 创建卡片
await app.getUploadManager().createCard({
    frontImageData: frontData,
    backImageData: backData
});

// 控制旋转
app.getControlsManager().setAutoRotate(true);

// 调整距离
app.getSceneManager().adjustCameraDistance(-2);
```

### 高级用法（访问子系统）
```javascript
// 渲染器配置
const renderer = app.getSceneManager().getRendererManager();
renderer.setExposure(1.5);
renderer.getRenderInfo();

// 相机配置
const camera = app.getSceneManager().getCameraManager();
camera.setFOV(90);
camera.setDistanceRange(1, 30);

// 光照配置
const lighting = app.getSceneManager().getLightingManager();
lighting.setAmbientIntensity(1.2);
lighting.setDynamicLightsEnabled(true);
```

---

## 🌐 浏览器兼容性

| 浏览器 | 最低版本 | 状态 |
|--------|----------|------|
| Chrome | 90+ | ✅ 支持 |
| Firefox | 88+ | ✅ 支持 |
| Edge | 90+ | ✅ 支持 |
| Safari | 14+ | ✅ 支持 |

**要求**：支持ES6模块（type="module"）

---

## ⚠️ 注意事项

### ❌ 不能这样做
```bash
# 直接双击HTML文件打开
file:///C:/Users/.../index.html  # ❌ 会报错
```

### ✅ 正确做法
```bash
# 必须通过HTTP服务器访问
http://localhost:8000/index.html  # ✅ 正确
```

**原因**：ES6模块需要HTTP协议

---

## 🔗 快速链接

### 常用页面
- 🏠 [主页](index.html)
- 🧪 [测试页](tests/test-modules.html)
- 📘 [示例页](tests/example-usage.html)
- 🔄 [清理缓存](tests/start-fresh.html)

### 重要文档
- 📖 [主文档](README.md)
- 📚 [API文档](API.md)
- 🔧 [重构说明](模块重构说明.md)
- 🐛 [故障排查](故障排查指南.md)

---

## 📊 项目统计

### 代码规模
- **JavaScript**：11个模块文件，约1500+行代码
- **HTML**：5个页面（2主页 + 3测试）
- **文档**：9个Markdown文档

### 功能模块
- **渲染系统**：4个模块（scene + renderer + camera + lighting）
- **业务逻辑**：4个模块（model + upload + controls + utils）
- **主入口**：1个（main.js）

### 测试覆盖
- **模块测试**：11个模块全覆盖
- **功能测试**：核心功能全覆盖
- **工具支持**：缓存清理、性能监控

---

## 🎓 学习路径

### 初学者
1. 阅读 [README.md](README.md) 了解基础
2. 运行 [tests/test-modules.html](tests/test-modules.html) 验证环境
3. 查看 [tests/example-usage.html](tests/example-usage.html) 学习API
4. 尝试修改参数，观察效果

### 开发者
1. 阅读 [模块重构说明.md](模块重构说明.md) 了解架构
2. 阅读 [API.md](API.md) 掌握完整API
3. 研究源码，理解实现细节
4. 尝试扩展新功能

### 维护者
1. 阅读 [项目结构说明.md](项目结构说明.md) 了解全局
2. 参考 [重构与清理总结.md](重构与清理总结.md) 了解历史
3. 使用 [故障排查指南.md](故障排查指南.md) 解决问题
4. 查看 [清理记录.md](清理记录.md) 管理文件

---

## 🚀 下一步行动

### 立即开始
```bash
# 1. 启动服务器
py -m http.server 8000

# 2. 打开浏览器访问
http://localhost:8000/index.html

# 3. 上传图片创建3D卡片
```

### 深入学习
1. 查看API文档学习更多用法
2. 运行测试页面了解所有功能
3. 阅读源码理解实现细节
4. 尝试自定义配置和扩展

### 遇到问题？
1. 检查 [故障排查指南.md](故障排查指南.md)
2. 访问 [tests/start-fresh.html](tests/start-fresh.html) 清理缓存
3. 查看浏览器控制台的错误信息
4. 参考测试页面的正确示例

---

## 📞 支持与反馈

### 文档齐全
项目包含8个详细的Markdown文档，覆盖使用、开发、维护的各个方面。

### 测试完善
提供完整的测试套件和示例代码，方便快速上手和调试。

### 代码质量
- ✅ 无Linter错误
- ✅ 完整的JSDoc注释
- ✅ 清晰的代码结构
- ✅ 良好的命名规范

---

**祝您使用愉快！🎉**

如有问题，请先查阅相关文档，大部分问题都能找到答案。

